<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <script>
        const ROOM_ID = "<%= roomId %>"
    </script>
    <script defer src="https://unpkg.com/peerjs@1.2.0/dist/peerjs.min.js"></script>
    <script src="/socket.io/socket.io.js" defer></script>
    <script src="script.js" defer></script>


    <script src="https://aframe.io/releases/1.0.4/aframe.min.js"></script>
    <script src="https://unpkg.com/aframe-sharedspace-component@1.0.1/dist/aframe-sharedspace-component.min.js"></script>
    <script src="https://rawgit.com/rdub80/aframe-gui/master/dist/aframe-gui.min.js"></script>
    <script src="https://unpkg.com/aframe-html-shader@0.2.0/dist/aframe-html-shader.min.js"></script>
    <script src="https://rawgit.com/feiss/aframe-environment-component/master/dist/aframe-environment-component.min.js"></script>
    <link href="https://fonts.googleapis.com/css?family=Fira+Sans" rel="stylesheet">

    <script src="https://unpkg.com/aframe-event-set-component@3.0.3/dist/aframe-event-set-component.min.js"></script>


    <link href="https://unpkg.com/material-components-web@latest/dist/material-components-web.min.css" rel="stylesheet">
    <script src="https://unpkg.com/material-components-web@latest/dist/material-components-web.min.js"></script>
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">

    <title>Welcome to Sidevox (A-Frame + Zoom-clone)</title>

    <style>
        #video-grid {
            display: grid;
            /* grid-template-columns: repeat(auto-fill, 180px);*/
            /* grid-auto-rows: 140px; */
            visibility: hidden;
            width: 0;
            height: 0;
        }
        
        video {
            width: 90%;
            height: 90%;
            object-fit: cover;
            border: 5px solid greenyellow;
        }
        
        .container {
            position: relative;
        }
        
        .container video {
            width: 160px;
            height: 120px;
            object-fit: cover;
            border: 4px solid red;
            position: relative;
            z-index: 0;
        }
        
        .overlay {
            position: absolute;
            top: 0;
            left: 0;
            z-index: 1;
            color: #00FF00;
        }
    </style>
    <link rel="stylesheet" href="css/chatVR.css">

    <style type="text/css">
        @font-face {
            font-family: "Ionicons";
            src: url("fonts/ionicons.eot?v=2.0.1");
            src: url("fonts/ionicons.eot?v=2.0.1#iefix") format("embedded-opentype"), url("fonts/ionicons.ttf?v=2.0.1") format("truetype"), url("fonts/ionicons.woff?v=2.0.1") format("woff"), url("fonts/ionicons.svg?v=2.0.1#Ionicons") format("svg");
            font-weight: normal;
            font-style: normal
        }
        
        body {
            font-family: Ionicons;
        }
        
        .visuallyhidden {
            display: block;
            border: 0;
            clip: rect(0 0 0 0);
            height: 1px;
            width: 1px;
            margin: -1px;
            padding: 0;
            overflow: hidden;
            position: absolute !important;
        }
    </style>

    <script src="fontfaceobserver.js"></script>
    <script src="keyboard-gui.js"></script>
    <script src="gui-env.js"></script>


    <script>
        AFRAME.registerComponent('queue', {
            dependencies: ['position'],

            schema: {
                position: {
                    default: 1
                },
                separation: {
                    default: 2
                }
            },

            // Actualización de la posición del usuario
            update() {
                var position = this.el.getAttribute('position');
                console.log('|------------|-----------------|----------------|')
                console.log('**Update position**');
                position.z = -(this.data.position - 1) * this.data.separation;
                console.log('Position ');
                console.log(position);
                console.log('|------------|-----------------|----------------|')
                this.el.setAttribute('position', position);
            }
        });
    </script>
    <script>
        AFRAME.registerComponent('theme', {
            schema: {
                type: 'color',
                default: 'black'
            },

            update() {
                var color = this.data;
                var themable = this.el.querySelectorAll('.themable');
                themable.forEach(function(el) {
                    el.setAttribute('color', color);
                });
            }
        });
    </script>
</head>

<body>
    <a class="hide" href="#">Hide</a>
    <section class="instructions">
        <span class="link"></span>
        <a class="move" href="./">Cambiar de sala.</a>
        <div id="buttons">
            <button class="mdc-button mdc-button--raised" disabled id="beginCallBtn">
            <span class="mdc-button__label">Iniciar llamada</span>
        </button>
            <button class="mdc-button mdc-button--raised" id="shareScreenBtn">
            <span class="mdc-button__label">Compartir pantalla</span>
        </button>
            <button class="mdc-button mdc-button--raised" id="joinBtn">
            <span class="mdc-button__label">Unirse a reunión</span>
        </button>
            <button class="mdc-button mdc-button--raised" id="getMediaBtn">
            <span class="mdc-button__label">Acceder a multimedia devices</span>
        </button>
        </div>


        <div id="errorMsg"></div>

        <div id="video-grid">
            <div class="container">
                <video id="localVideo" muted autoplay playsinline></video><br>
                <div class="overlay">
                    <p>Local Video</p>
                </div>
            </div>
        </div>
    </section>
    <!--Esto pemite usar un adaptador para compartir la pantalla-->
    <script src="https://webrtc.github.io/adapter/adapter-latest.js" defer></script>

    <a-scene>
        <a-assets>
            <!--        <a-mixin id="me" look-controls wasd-controls share="position, rotation, theme"></a-mixin>-->
            <a-mixin id="me" camera="#cameraRig" look-controls wasd-controls share="position, rotation, theme"></a-mixin>
            <!--        <a-mixin id="me"></a-mixin>-->

            <img id="wall" src="images/wall7.jpg">
            <img id="ceiling" src="images/wall6.jpg">
            <img crossorigin="anonymous" id="floor" src="images/floor4.jpg">
            <img id="skyTexture" src="https://cdn.aframe.io/360-image-gallery-boilerplate/img/sechelt.jpg">
            <!-- Add asset here -->


            <!-- Text Canvas -->
            <canvas id="canvasObj" crossorigin="anonymous" webkit-playsinline=""></canvas>
            <a-asset-item id="iconfont" src="fonts/ionicons.ttf"></a-asset-item>



            <video id="remoteVideo" autoplay playsinline></video>

        </a-assets>


        <a-entity sharedspace="audio: true; hold: true" avatars="placement: queue; onmyself: me">
            <!--        avatars="placement: queue; onmyself: me">-->
            <!-- Room -->
            <!-- Sky-->

            <a-video src="#localVideo" width="3.16" height="2" position="-7.84 7.20 -9.4"></a-video>

            <a-video src="#remoteVideo" width="15.15" height="9" position="1.55 4.92 -9.4"></a-video>

            <a-entity geometry="primitive: box; width: 3; height: 1" material="shader: html; target: #htmlLocalVideo" position="-7.68 8.8 -9" scale="1 1 0"></a-entity>
            <a-entity geometry="primitive: box; width: 3; height: 1" material="shader: html; target: #htmlRemoteVideo" position="2.25 8.8 -9" scale="1 1 0"></a-entity>

            <!--        <a-entity geometry="primitive: plane; width: 8; height: 7"-->
            <!--                  material="src: #video; color: #696969; roughness: 1; metalness: 0"-->
            <!--                  position="0 4.2 -5">-->
            <!--        </a-entity>-->

            <a-box class="sky" position="0 10 0" scale="20 0.5 20" src="#ceiling" repeat="5 5"></a-box>
            <!--        a-sky permiteponer de fondo imagenes 360-->
            <a-sky src="#skyTexture"></a-sky>
            <!-- Ground-->
            <a-plane rotation="-90 0 0" width="25" height="25" src="#floor" repeat="10 10"></a-plane>

            <!-- Walls-->
            <a-box class="wall1" position="10 5 0" scale="1 10 20" src="#wall" repeat="4 4"></a-box>
            <a-box class="wall2" position="-10 5 0" scale="1 10 20" src="#wall" repeat="4 4"></a-box>
            <a-box class="wall3" position="0 5 10" scale="20 10 1" src="#wall" repeat="4 4"></a-box>
            <a-box class="wall4" color="#333" position="0 5 -10" scale="20 10 1" src="#wall" repeat="4 4"></a-box>


            <a-entity text="value: Local \n video!; align: center; baseline: center; color: #000000" geometry="primitive: plane; width: 8; height: 1" position="-4.15 12 -9" visible="false"></a-entity>

            <a-entity text="value: Remote \n video!; align: center; baseline: center; color: #000000; visible: false" geometry="primitive: plane; width: 8; height: 1" position="4.15 10 -9" visible="false"></a-entity>
        </a-entity>


        <!-- <a-entity geometry="primitive: box; width:5; height:2; depth:0.01;" position="0 3 -4" material="shader: html; target: #htmlElement; fps:1;"></a-entity> -->
        <a-gui-flex-container id="flex" flex-direction="column" justify-content="center" align-items="middle" component-padding="0.1" opacity="0.7" width="4.5" height="1.8" position="9.48 4 -0.89" rotation="0 -90 0">
            <a-gui-input id="test_input" width="4" height="0.7" value="Starting value" onclick="testInputAction" font-size="160px" font-color="#212121" border-color="#212121" border-hover-color="#424242" background-color="#FAFAFA" hover-color="#F5F5F5" active-color="#FFEB3B">
            </a-gui-input>
        </a-gui-flex-container>

        <a-entity class="keyboard" position="9.27 2 -1.1" rotation="-15 -90 0">
            <a-entity id="keyboardNum" visible="false" position="0 -10 -1">
                <a-entity gui-item="type: flex-container; width: 5.25; height: 0.5;" gui-flex-container="flexDirection: row; justifyContent: center; alignItems: normal; componentPadding: 0.1; opacity: 0.7" position="0 0.5 0">
                    <a-entity gui-item="type: button; width: 0.5; height: 0.5;" gui-interactable="clickAction: keypress; key:1;" gui-button=" text:1; fontFamily:'Fira Sans';"></a-entity>
                    <a-entity gui-item="type: button; width: 0.5; height: 0.5;" gui-interactable="clickAction: keypress; key:2;" gui-button=" text:2; fontFamily:'Fira Sans';"></a-entity>
                    <a-entity gui-item="type: button; width: 0.5; height: 0.5;" gui-interactable="clickAction: keypress; key:3;" gui-button=" text:3; fontFamily:'Fira Sans';"></a-entity>
                    <a-entity gui-item="type: button; width: 0.5; height: 0.5;" gui-interactable="clickAction: keypress; key:4;" gui-button=" text:4; fontFamily:'Fira Sans';"></a-entity>
                    <a-entity gui-item="type: button; width: 0.5; height: 0.5;" gui-interactable="clickAction: keypress; key:5;" gui-button=" text:5; fontFamily:'Fira Sans';"></a-entity>
                    <a-entity gui-item="type: button; width: 0.5; height: 0.5;" gui-interactable="clickAction: keypress; key:6;" gui-button=" text:6; fontFamily:'Fira Sans';"></a-entity>
                    <a-entity gui-item="type: button; width: 0.5; height: 0.5;" gui-interactable="clickAction: keypress; key:7;" gui-button=" text:7; fontFamily:'Fira Sans';"></a-entity>
                    <a-entity gui-item="type: button; width: 0.5; height: 0.5;" gui-interactable="clickAction: keypress; key:8;" gui-button=" text:8; fontFamily:'Fira Sans';"></a-entity>
                    <a-entity gui-item="type: button; width: 0.5; height: 0.5;" gui-interactable="clickAction: keypress; key:9;" gui-button=" text:9; fontFamily:'Fira Sans';"></a-entity>
                    <a-entity gui-item="type: button; width: 0.5; height: 0.5;" gui-interactable="clickAction: keypress; key:0;" gui-button=" text:0; fontFamily:'Fira Sans';"></a-entity>
                </a-entity>

                <a-entity gui-item="type: flex-container; width: 5.25; height: 0.5;" gui-flex-container="flexDirection: row; justifyContent: center; alignItems: normal; componentPadding: 0.1; opacity: 0.7" position="0 0 0">
                    <a-gui-button width="0.5" height="0.5" onclick="keypress" key="-" value="-" font-family="Fira Sans"></a-gui-button>
                    <a-gui-button width="0.5" height="0.5" onclick="keypress" key="/" value="/" font-family="Fira Sans"></a-gui-button>
                    <a-gui-button width="0.5" height="0.5" onclick="keypress" key=":" value=":" font-family="Fira Sans"></a-gui-button>
                    <a-gui-button width="0.5" height="0.5" onclick="keypress" key=";" value=";" font-family="Fira Sans"></a-gui-button>
                    <a-gui-button width="0.5" height="0.5" onclick="keypress" key="(" value="(" font-family="Fira Sans"></a-gui-button>
                    <a-gui-button width="0.5" height="0.5" onclick="keypress" key=")" value=")" font-family="Fira Sans"></a-gui-button>
                    <a-gui-button width="0.5" height="0.5" onclick="keypress" key="$" value="$" font-family="Fira Sans"></a-gui-button>
                    <a-gui-button width="0.5" height="0.5" onclick="keypress" key="&" value="&" font-family="Fira Sans"></a-gui-button>
                    <a-gui-button width="0.5" height="0.5" onclick="keypress" key="@" value="@" font-family="Fira Sans"></a-gui-button>
                    <a-gui-button width="0.5" height="0.5" onclick="keypress" key='"' value='"' font-family="Fira Sans"></a-gui-button>
                </a-entity>

                <a-entity gui-item="type: flex-container; width: 5.25; height: 0.5;" gui-flex-container="flexDirection: row; justifyContent: center; alignItems: normal; componentPadding: 0.1; opacity: 0.7" position="0 -0.5 0">
                    <a-entity gui-item="type: button; width: 0.75; height: 0.5;" gui-interactable="clickAction: switchKb2; keyCode:17;" gui-button=" text:#+=; fontFamily:'Fira Sans';"></a-entity>
                    <a-gui-button width="0.5" height="0.5" onclick="keypress" key="." value="." font-family="Fira Sans"></a-gui-button>
                    <a-gui-button width="0.5" height="0.5" onclick="keypress" key="," value="," font-family="Fira Sans"></a-gui-button>
                    <a-gui-button width="0.5" height="0.5" onclick="keypress" key="?" value="?" font-family="Fira Sans"></a-gui-button>
                    <a-gui-button width="0.5" height="0.5" onclick="keypress" key="!" value="!" font-family="Fira Sans"></a-gui-button>
                    <a-gui-button width="0.5" height="0.5" onclick="keypress" key="'" value="'" font-family="Fira Sans"></a-gui-button>
                    <a-entity gui-item="type: button; width: 0.75; height: 0.5;" gui-interactable="clickAction: keypress; key:Backspace;" gui-icon-label-button="icon:backspace; text:; fontFamily:'Fira Sans';"></a-entity>
                </a-entity>
            </a-entity>
            <a-entity id="keyboardChar" visible="false" position="0 -10 -1">
                <a-entity gui-item="type: flex-container; width: 5.25; height: 0.5;" gui-flex-container="flexDirection: row; justifyContent: center; alignItems: normal; componentPadding: 0.1; opacity: 0.7" position="0 0.5 0">
                    <a-gui-button width="0.5" height="0.5" onclick="keypress" key="[" value="[" font-family="Fira Sans"></a-gui-button>
                    <a-gui-button width="0.5" height="0.5" onclick="keypress" key="]" value="]" font-family="Fira Sans"></a-gui-button>
                    <a-gui-button width="0.5" height="0.5" onclick="keypress" key="{" value="{" font-family="Fira Sans"></a-gui-button>
                    <a-gui-button width="0.5" height="0.5" onclick="keypress" key="}" value="}" font-family="Fira Sans"></a-gui-button>
                    <a-gui-button width="0.5" height="0.5" onclick="keypress" key="#" value="#" font-family="Fira Sans"></a-gui-button>
                    <a-gui-button width="0.5" height="0.5" onclick="keypress" key="%" value="%" font-family="Fira Sans"></a-gui-button>
                    <a-gui-button width="0.5" height="0.5" onclick="keypress" key="^" value="^" font-family="Fira Sans"></a-gui-button>
                    <a-gui-button width="0.5" height="0.5" onclick="keypress" key="*" value="*" font-family="Fira Sans"></a-gui-button>
                    <a-gui-button width="0.5" height="0.5" onclick="keypress" key="+" value="+" font-family="Fira Sans"></a-gui-button>
                    <a-gui-button width="0.5" height="0.5" onclick="keypress" key="=" value="=" font-family="Fira Sans"></a-gui-button>
                </a-entity>

                <a-entity gui-item="type: flex-container; width: 5.25; height: 0.5;" gui-flex-container="flexDirection: row; justifyContent: center; alignItems: normal; componentPadding: 0.1; opacity: 0.7" position="0 0 0">
                    <a-gui-button width="0.5" height="0.5" onclick="keypress" key="_" value="_" font-family="Fira Sans"></a-gui-button>
                    <a-gui-button width="0.5" height="0.5" onclick="keypress" key="\" value="\" font-family="Fira Sans"></a-gui-button>
                    <a-gui-button width="0.5" height="0.5" onclick="keypress" key="|" value="|" font-family="Fira Sans"></a-gui-button>
                    <a-gui-button width="0.5" height="0.5" onclick="keypress" key="~" value="~" font-family="Fira Sans"></a-gui-button>
                    <a-gui-button width="0.5" height="0.5" onclick="keypress" key="<" value="<" font-family="Fira Sans"></a-gui-button>
                    <a-gui-button width="0.5" height="0.5" onclick="keypress" key=">" value=">" font-family="Fira Sans"></a-gui-button>
                    <a-entity gui-item="type: button; width: 0.5; height: 0.5;" gui-interactable="clickAction: keypress; keyCode:69;" euro gui-button=" text:€; fontFamily:'Fira Sans';"></a-entity>
                    <a-entity gui-item="type: button; width: 0.5; height: 0.5;" gui-interactable="clickAction: keypress; keyCode:76;" pound_sterling gui-button=" text:char#163; fontFamily:'Fira Sans';"></a-entity>
                    <a-entity gui-item="type: button; width: 0.5; height: 0.5;" gui-interactable="clickAction: keypress; keyCode:89;" yen_sign gui-button=" text:char#165; fontFamily:'Fira Sans';"></a-entity>
                    <a-entity gui-item="type: button; width: 0.5; height: 0.5;" gui-interactable="clickAction: keypress; keyCode:8226;" bullet gui-button="text:char#8226; fontFamily:'Fira Sans';"></a-entity>
                </a-entity>

                <a-entity gui-item="type: flex-container; width: 5.25; height: 0.5;" gui-flex-container="flexDirection: row; justifyContent: center; alignItems: normal; componentPadding: 0.1; opacity: 0.7" position="0 -0.5 0">
                    <a-entity gui-item="type: button; width: 0.75; height: 0.5;" gui-interactable="clickAction: switchKb2; keyCode:17;" gui-button=" text:123; fontFamily:'Fira Sans';"></a-entity>
                    <a-gui-button width="0.5" height="0.5" onclick="keypress" key="." value="." font-family="Fira Sans"></a-gui-button>
                    <a-gui-button width="0.5" height="0.5" onclick="keypress" key="," value="," font-family="Fira Sans"></a-gui-button>
                    <a-gui-button width="0.5" height="0.5" onclick="keypress" key="?" value="?" font-family="Fira Sans"></a-gui-button>
                    <a-gui-button width="0.5" height="0.5" onclick="keypress" key="!" value="!" font-family="Fira Sans"></a-gui-button>
                    <a-gui-button width="0.5" height="0.5" onclick="keypress" key="*" value="(" font-family="Fira Sans"></a-gui-button>
                    <a-entity gui-item="type: button; width: 0.75; height: 0.5;" gui-interactable="clickAction: keypress; key:Backspace;" gui-icon-label-button="icon:backspace; text:; fontFamily:'Fira Sans';"></a-entity>

                </a-entity>
            </a-entity>
            <a-entity id="keyboardAbcHigh" visible="false" position="0 -10 -1">
                <a-entity gui-item="type: flex-container; width: 5.25; height: 0.5;" gui-flex-container="flexDirection: row; justifyContent: center; alignItems: normal; componentPadding: 0.1; opacity: 0.7" position="0 0.5 0">
                    <a-gui-button width="0.5" height="0.5" onclick="keypress" key="Q" value="Q" font-family="Fira Sans"></a-gui-button>
                    <a-gui-button width="0.5" height="0.5" onclick="keypress" key="W" value="W" font-family="Fira Sans"></a-gui-button>
                    <a-gui-button width="0.5" height="0.5" onclick="keypress" key="E" value="E" font-family="Fira Sans"></a-gui-button>
                    <a-gui-button width="0.5" height="0.5" onclick="keypress" key="R" value="R" font-family="Fira Sans"></a-gui-button>
                    <a-gui-button width="0.5" height="0.5" onclick="keypress" key="T" value="T" font-family="Fira Sans"></a-gui-button>
                    <a-gui-button width="0.5" height="0.5" onclick="keypress" key="Y" value="Y" font-family="Fira Sans"></a-gui-button>
                    <a-gui-button width="0.5" height="0.5" onclick="keypress" key="U" value="U" font-family="Fira Sans"></a-gui-button>
                    <a-gui-button width="0.5" height="0.5" onclick="keypress" key="I" value="I" font-family="Fira Sans"></a-gui-button>
                    <a-gui-button width="0.5" height="0.5" onclick="keypress" key="O" value="O" font-family="Fira Sans"></a-gui-button>
                    <a-gui-button width="0.5" height="0.5" onclick="keypress" key="P" value="P" font-family="Fira Sans"></a-gui-button>
                </a-entity>

                <a-entity gui-item="type: flex-container; width: 5.25; height: 0.5;" gui-flex-container="flexDirection: row; justifyContent: center; alignItems: normal; componentPadding: 0.1; opacity: 0.7" position="0 0 0">
                    <a-gui-button width="0.5" height="0.5" onclick="keypress" key="A" value="A" font-family="Fira Sans"></a-gui-button>
                    <a-gui-button width="0.5" height="0.5" onclick="keypress" key="S" value="S" font-family="Fira Sans"></a-gui-button>
                    <a-gui-button width="0.5" height="0.5" onclick="keypress" key="D" value="D" font-family="Fira Sans"></a-gui-button>
                    <a-gui-button width="0.5" height="0.5" onclick="keypress" key="F" value="F" font-family="Fira Sans"></a-gui-button>
                    <a-gui-button width="0.5" height="0.5" onclick="keypress" key="G" value="G" font-family="Fira Sans"></a-gui-button>
                    <a-gui-button width="0.5" height="0.5" onclick="keypress" key="H" value="H" font-family="Fira Sans"></a-gui-button>
                    <a-gui-button width="0.5" height="0.5" onclick="keypress" key="J" value="J" font-family="Fira Sans"></a-gui-button>
                    <a-gui-button width="0.5" height="0.5" onclick="keypress" key="K" value="K" font-family="Fira Sans"></a-gui-button>
                    <a-gui-button width="0.5" height="0.5" onclick="keypress" key="L" value="L" font-family="Fira Sans"></a-gui-button>
                </a-entity>

                <a-entity gui-item="type: flex-container; width: 5.25; height: 0.5;" gui-flex-container="flexDirection: row; justifyContent: center; alignItems: normal; componentPadding: 0.1; opacity: 0.7" position="0 -0.5 0">
                    <a-entity gui-item="type: button; width: 0.75; height: 0.5;" gui-interactable="clickAction: switchKbToAbcLow; keyCode:16;" id="shiftDown" gui-icon-label-button="icon:arrow-down-a; text:; fontFamily:'Fira Sans';"></a-entity>
                    <a-gui-button width="0.5" height="0.5" onclick="keypress" key="Z" value="Z" font-family="Fira Sans"></a-gui-button>
                    <a-gui-button width="0.5" height="0.5" onclick="keypress" key="X" value="X" font-family="Fira Sans"></a-gui-button>
                    <a-gui-button width="0.5" height="0.5" onclick="keypress" key="C" value="C" font-family="Fira Sans"></a-gui-button>
                    <a-gui-button width="0.5" height="0.5" onclick="keypress" key="V" value="V" font-family="Fira Sans"></a-gui-button>
                    <a-gui-button width="0.5" height="0.5" onclick="keypress" key="B" value="B" font-family="Fira Sans"></a-gui-button>
                    <a-gui-button width="0.5" height="0.5" onclick="keypress" key="N" value="N" font-family="Fira Sans"></a-gui-button>
                    <a-gui-button width="0.5" height="0.5" onclick="keypress" key="M" value="M" font-family="Fira Sans"></a-gui-button>
                    <a-entity gui-item="type: button; width: 0.75; height: 0.5;" gui-interactable="clickAction: keypress; key:Backspace;" gui-icon-label-button="icon:backspace; text:; fontFamily:'Fira Sans';"></a-entity>
                </a-entity>
            </a-entity>
            <a-entity id="keyboardAbcLow" visible="true" position="0 0 0">
                <a-entity gui-item="type: flex-container; width: 5.25; height: 0.5;" gui-flex-container="flexDirection: row; justifyContent: center; alignItems: normal; componentPadding: 0.1; opacity: 0.7" position="0 0.5 0">
                    <a-gui-button width="0.5" height="0.5" onclick="keypress" key="q" value="q" font-family="Fira Sans"></a-gui-button>
                    <a-gui-button width="0.5" height="0.5" onclick="keypress" key="w" value="w" font-family="Fira Sans"></a-gui-button>
                    <a-gui-button width="0.5" height="0.5" onclick="keypress" key="e" value="e" font-family="Fira Sans"></a-gui-button>
                    <a-gui-button width="0.5" height="0.5" onclick="keypress" key="r" value="r" font-family="Fira Sans"></a-gui-button>
                    <a-gui-button width="0.5" height="0.5" onclick="keypress" key="t" value="t" font-family="Fira Sans"></a-gui-button>
                    <a-gui-button width="0.5" height="0.5" onclick="keypress" key="y" value="y" font-family="Fira Sans"></a-gui-button>
                    <a-gui-button width="0.5" height="0.5" onclick="keypress" key="u" value="u" font-family="Fira Sans"></a-gui-button>
                    <a-gui-button width="0.5" height="0.5" onclick="keypress" key="i" value="i" font-family="Fira Sans"></a-gui-button>
                    <a-gui-button width="0.5" height="0.5" onclick="keypress" key="o" value="o" font-family="Fira Sans"></a-gui-button>
                    <a-gui-button width="0.5" height="0.5" onclick="keypress" key="p" value="p" font-family="Fira Sans"></a-gui-button>
                </a-entity>

                <a-entity gui-item="type: flex-container; width: 5.25; height: 0.5;" gui-flex-container="flexDirection: row; justifyContent: center; alignItems: normal; componentPadding: 0.1; opacity: 0.7" position="0 0 0">
                    <a-gui-button width="0.5" height="0.5" onclick="keypress" key="a" value="a" font-family="Fira Sans"></a-gui-button>
                    <a-gui-button width="0.5" height="0.5" onclick="keypress" key="s" value="s" font-family="Fira Sans"></a-gui-button>
                    <a-gui-button width="0.5" height="0.5" onclick="keypress" key="d" value="d" font-family="Fira Sans"></a-gui-button>
                    <a-gui-button width="0.5" height="0.5" onclick="keypress" key="f" value="f" font-family="Fira Sans"></a-gui-button>
                    <a-gui-button width="0.5" height="0.5" onclick="keypress" key="g" value="g" font-family="Fira Sans"></a-gui-button>
                    <a-gui-button width="0.5" height="0.5" onclick="keypress" key="h" value="h" font-family="Fira Sans"></a-gui-button>
                    <a-gui-button width="0.5" height="0.5" onclick="keypress" key="j" value="j" font-family="Fira Sans"></a-gui-button>
                    <a-gui-button width="0.5" height="0.5" onclick="keypress" key="k" value="k" font-family="Fira Sans"></a-gui-button>
                    <a-gui-button width="0.5" height="0.5" onclick="keypress" key="l" value="l" font-family="Fira Sans"></a-gui-button>
                </a-entity>

                <a-entity gui-item="type: flex-container; width: 5.25; height: 0.5;" gui-flex-container="flexDirection: row; justifyContent: center; alignItems: normal; componentPadding: 0.1; opacity: 0.7" position="0 -0.5 0">
                    <a-entity gui-item="type: button; width: 0.75; height: 0.5;" gui-interactable="clickAction: switchKbToAbcHigh; keyCode:16;" id="shiftUp" gui-icon-label-button="icon:arrow-up-a; text:; fontFamily:'Fira Sans';"></a-entity>
                    <a-gui-button width="0.5" height="0.5" onclick="keypress" key="z" value="z" font-family="Fira Sans"></a-gui-button>
                    <a-gui-button width="0.5" height="0.5" onclick="keypress" key="x" value="x" font-family="Fira Sans"></a-gui-button>
                    <a-gui-button width="0.5" height="0.5" onclick="keypress" key="c" value="c" font-family="Fira Sans"></a-gui-button>
                    <a-gui-button width="0.5" height="0.5" onclick="keypress" key="v" value="v" font-family="Fira Sans"></a-gui-button>
                    <a-gui-button width="0.5" height="0.5" onclick="keypress" key="b" value="b" font-family="Fira Sans"></a-gui-button>
                    <a-gui-button width="0.5" height="0.5" onclick="keypress" key="n" value="n" font-family="Fira Sans"></a-gui-button>
                    <a-gui-button width="0.5" height="0.5" onclick="keypress" key="m" value="m" font-family="Fira Sans"></a-gui-button>
                    <a-entity gui-item="type: button; width: 0.75; height: 0.5;" gui-interactable="clickAction: keypress; key:Backspace;" gui-icon-label-button="icon:backspace; text:; fontFamily:'Fira Sans';"></a-entity>
                </a-entity>
            </a-entity>
            <a-entity id="keyboardNav">
                <a-entity gui-item="type: flex-container; width: 5.25; height: 0.5;" gui-flex-container="flexDirection: row; justifyContent: center; alignItems: normal; componentPadding: 0.1; opacity: 0.7" position="0 -1 0">
                    <a-entity gui-item="type: button; width: 0.75; height: 0.5;" id="navkbSwitch" gui-interactable="clickAction: switchKb; keyCode:9;" gui-button=" text:123; fontFamily:'Fira Sans';"></a-entity>
                    <a-entity gui-item="type: button; width: 0.5; height: 0.5;" gui-interactable="clickAction: voicecontrol;" gui-icon-label-button="icon:android-microphone; fontFamily:'Fira Sans';"></a-entity>
                    <a-entity gui-item="type: button; width: 3; height: 0.5;" gui-interactable="clickAction: keypress; keyCode:32;" id="space" gui-button=" text:space; fontFamily:'Fira Sans';"></a-entity>
                    <a-entity gui-item="type: button; width: 0.75; height: 0.5;" gui-interactable="clickAction: enter; keyCode:13;" id="enter" gui-button=" text:Go; fontFamily:'Fira Sans';"></a-entity>
                </a-entity>
            </a-entity>
        </a-entity>


        <!-- Camera + cursor. -->
        <!--    <a-entity id="cameraRig" position="0 1.6 0">-->
        <a-entity id="cameraRig" position="0 0 0">
            <!--        <a-camera look-controls wasd-controls="acceleration: 200" position="0 0.5 0">&lt;!&ndash;CELULAR&ndash;&gt;-->
            <a-camera look-controls wasd-controls="acceleration: 200" position="0 1.6 0">
                <!--COMPUTADOR-->
                <!--        <a-camera position="0 0 0">-->
                <!--            fuse="false"-->

                <a-entity id="cursor" raycaster="objects: [gui-interactable]" cursor="fuse: true;" animation__click="property: scale; startEvents: click; easing: easeInCubic; dur: 150; from: 0.1 0.1 0.1; to: 1 1 1" animation__fusing="property: scale; startEvents: fusing; easing: easeInCubic; dur: 1500; from: 1 1 1; to: 0.1 0.1 0.1"
                    animation__mouseleave="property: scale; startEvents: mouseleave; easing: easeInCubic; dur: 500; to: 1 1 1" material="color: black; shader: flat" position="0 0 -1" geometry="primitive: ring; radiusInner: 0.02; radiusOuter: 0.03">
                </a-entity>
                <!-- /cursor -->
            </a-camera>
            <!-- /camera -->
        </a-entity>


    </a-scene>

    <div style="width: 100%; height: 100%; position: fixed; left: 0; top: 0; z-index: -1; overflow: hidden">
        <div id="htmlElement" style="background: #fff; color:#000; font-size: 60px; width:1500px; height: 600px;"></div>
    </div>

    <div style="width: 100%; height: 100%; position: fixed; left: 0; top: 0; z-index: -1; overflow: hidden">
        <div id="htmlLocalVideo" style="background: darkslategrey; color: navajowhite; font-size: 150px">Local video!</div>
    </div>

    <div style="width: 100%; height: 100%; position: fixed; left: 0; top: 0; z-index: -1; overflow: hidden">
        <div id="htmlRemoteVideo" style="background: darkcyan; color: aliceblue; font-size: 150px">Remote video!</div>
    </div>


    <template>
    
        <a-entity theme position-around>
            <a-entity obj-model="obj: url(https://cdn.glitch.com/4e53a88a-96d2-46e5-ab4b-f8f1b9c2d486%2Fface.obj?1506059732633)" rotation="0 180 0" scale="0.01 0.01 0.01"></a-entity>
            <!--
            Anime Face Model Stocking(https://sketchfab.com/models/d049b6a85d204057b170ef9dbc851200) by stocking(https://sketchfab.com/stocking) is licensed under CC Attribution(http://creativecommons.org/licenses/by/4.0/)
            -->
        </a-entity>
    </template>
    <script src="communication.js"></script>
    <script src="key-press.js"></script>
    <script src="server.js"></script>
</body>

</html>